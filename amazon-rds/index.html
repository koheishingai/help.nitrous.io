<!DOCTYPE html>
<html class="home index">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Creating a  Rails app with Amazon RDS</title>
  <meta content='width=device-width, initial-scale=1.0' name='viewport'>
  <meta content='Nitrous.IO is a cloud-based development environment platform with a web-based IDE and cloud VMs, and supports Ruby, Python, Node.js and more.' name='description'>
  <meta content='Nitrous.IO' name='author'>

  <!-- syntax highlighting CSS -->
  <link rel="stylesheet" href="/css/syntax.css">

  <!-- Custom CSS 
  <link rel="stylesheet" href="/css/main.css">-->
  <link href="/css/style.css" media="all" rel="stylesheet" type="text/css" />

  <link href='/favicon.ico' rel='shortcut icon' type='image/x-icon'>

</head>
<body>

 <div class='mast clearfix' id='header'>
  <div class='mast-container'>
    <ul id='topnav'>
      <li>
        <a href="/discussions">Discussions</a>
      </li>
      <li>
        <a href="https://www.nitrous.io/chat" target="_blank">Chat</a>
      </li>
      <li>
        <a href="mailto:help@nitrous.io">Contact Support</a>
      </li>
      <li>
        <a href="https://nitrous.io/users/sign_in" class="btn">Sign In</a>
      </li>
    </ul>
    <h1 id='logo'>
      <a href='/'>Nitrous.IO<span> Support</span></a>
    </h1>
  </div>
</div>
<div class='clearfix' id='promo-main'>
  <div class="mast-container">
    <div id="search">
      <script>
      (function() {
        var cx = '009198278762462778395:pwuaikni4bs';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
      </script>
      <gcse:search></gcse:search>
    </div>
  </div>
</div>
<div class="white-bg">
  <div class="container">
    <h2> Creating a  rails app with amazon rds </h2>
    <div class='articles'>

      <p>With <a href='http://aws.amazon.com/rds/'>Amazon RDS</a> you can quickly and easily provision and maintain a MySQL, Oracle, or Microsoft SQL Server instance in the cloud. Lets go over how to get started with a Rails app using the Amazon RDS MySQL engine.</p>

<h3 id='prerequisites'>Prerequisites</h3>

<p>Before we get started, make sure you have the following:</p>

<ul>
<li>An <a href='http://aws.amazon.com/'>Amazon Web Services Account</a></li>

<li>An <a href='https://nitrous.io'>Nitrous.IO account</a></li>
</ul>

<h3 id='adding_a_security_group_with_amazon_rds'>Adding a Security Group with Amazon RDS</h3>

<p>Lets add the Nitrous.IO box to the Amazon RDS security group. Since This EC2 box will be running in the same region as the Amazon RDS (US West) we can add the internal IP into the Security Group.</p>

<p>Ping your Rails box URI within the Nitrous.IO console to find the internal IP:</p>

<pre><code>$ ping rails-box-3921.usw1.actionbox.io
PING ec2-184-169-182-155.us-west-1.compute.amazonaws.com (10.168.125.111) 56(84) bytes of data.
64 bytes from ip-10-168-125-111.us-west-1.compute.internal (10.168.125.111): icmp_req=1 ttl=64 time=0.130 ms</code></pre>

<p>Login to your <a href='https://console.aws.amazon.com/rds/home'>Amazon RDS Console</a>, navigate to Security Groups and create a new security group using the internal IP as a CIDR/IP connection type.</p>

<p><img alt='Security Group Details' src='https://raw.github.com/action-io/action-assets/master/support/screenshots/amazon_rds_security_group.png' /></p>

<h3 id='setting_up_a_new_instance_with_amazon_rds'>Setting Up a New Instance with Amazon RDS</h3>

<p>Within your <a href='https://console.aws.amazon.com/rds/home'>Amazon RDS Console</a> you will want to navigate to Instances and Launch a new DB Instance. When prompted, select the MySQL Database Engine.</p>

<p>When setting up the database remember to select the Security Group you have just created.</p>

<p><img alt='Amazon RDS Settings' src='https://raw.github.com/action-io/action-assets/master/support/screenshots/amazon_instance_setting.png' /></p>

<h3 id='create_a_rails_app_on_nitrousio'>Create a Rails app on Nitrous.IO</h3>

<p>Login to Nitrious.IO and create or open up a Rails box. Within the console enter in the following commands:</p>

<pre><code>$ rails new blog
$ cd blog</code></pre>

<p>At this point you can test your Rails app with the following command:</p>

<pre><code>$ rails server</code></pre>

<p>Once the app is running, you can view it by navigating to <strong>Preview > Port 3000</strong> in your Nitrous.IO IDE.</p>

<h3 id='setting_up_the_database_configurations'>Setting up the Database configurations</h3>

<p>The next step is to configure the app to connect to Amazon RDS.</p>

<p>Within config/database.yml, configure your development environment to use the following variables:</p>

<pre><code>development:
 adapter: mysql2
 encoding: utf8
 database: &lt;%= ENV[&#39;RDS_DB_NAME&#39;] %&gt;
 username: &lt;%= ENV[&#39;RDS_USERNAME&#39;] %&gt;
 password: &lt;%= ENV[&#39;RDS_PASSWORD&#39;] %&gt;
 host: &lt;%= ENV[&#39;RDS_HOSTNAME&#39;] %&gt;
 port: &lt;%= ENV[&#39;RDS_PORT&#39;] %&gt;</code></pre>

<p>For our test and production databases, we&#8217;ll be provisioning new databases on Amazon RDS. If you want to create a test database (&#8220;blog-app-test&#8221;), just repeat these instructions.</p>

<p>As you can see we have changed the adapter to use mysql2 which is the adapter Amazon RDS uses. You will also need to install the following gem in order to add support for this:</p>

<pre><code>$ gem install mysql2
$ bundle install</code></pre>

<p>Add the mysql2 gem to your Gemfile:</p>

<pre><code>gem &#39;mysql2&#39;</code></pre>

<h3 id='creating_the_database'>Creating the Database</h3>

<p>The App should now have access to the Amazon RDS instance. Run the following commands to create a new database, create a new table, and migrate it to Amazon RDS:</p>

<pre><code>$ rake db:create
$ rails generate controller home index
$ rails generate scaffold Post name:string title:string content:text
$ rake db:migrate</code></pre>

<h3 id='configuring_your_routes_and_adding_a_link'>Configuring your Routes and Adding a Link</h3>

<p>You will first need to remove your static index file:</p>

<pre><code>$ rm public/index.html</code></pre>

<p>Add the following route into config/routes.rb:</p>

<pre><code>Blog::Application.routes.draw do
  root :to =&gt; &quot;home#index&quot;
end</code></pre>

<p>Open app/views/home/index.html.erb and modify it to include the following code:</p>

<pre><code>&lt;h1&gt;Hello, Rails!&lt;/h1&gt;
&lt;%= link_to &quot;My Blog&quot;, posts_path %&gt;</code></pre>

<h3 id='previewing_the_app'>Previewing the App</h3>

<p>Once the database is successfully migrated, run the following command:</p>

<pre><code>$ rails server</code></pre>

<p>You can now view the Rails App by navigating to <strong>Preview > Port 3000</strong> in your Nitrous.IO IDE.</p>

<p>For our regular users: How&#8217;d it go for you? If you&#8217;re having trouble, you can always get in touch with us by visiting our <a href='https://action.io/chat'>chatroom</a> or by <a href='mailto:support@action.io'>emailing us</a>.</p>

          </div><!--
          <div class="sidebar">
            <div class="box">
                Related Articles
              </div>
            </div>-->
          </div>
        </div>
        <footer class='guest'>
  <div class='mast'>
    <div class='mast-container'>
      <div class='row'>
        <div class='span3'>
          <ul class='nav nav-list'>
            <li class='nav-header'>Get started</li>
            <li>
              <a href='https://nitrous.io/pricing'>Pricing</a>
            </li>
            <li>
              <a href='http://help.nitrous.io/'>Support</a>
            </li>
            <li>
              <a href='http://help.nitrous.io/admin-beta'>Beta Agreement</a>
            </li>
            <li>
              <a href='http://help.nitrous.io/admin-terms'>Terms</a>
            </li>
            <li>
              <a href='http://help.nitrous.io/admin-security'>Security</a>
            </li>
            <li>
              <a href='http://help.nitrous.io/admin-privacy'>Privacy</a>
            </li>
          </ul>
        </div>
        <div class='span3'>
          <ul class='nav nav-list'>
            <li class='nav-header'>Nitrous.IO</li>
            <li>
              <a href='https://nitrous.io/about'>Company</a>
            </li>
            <li>
              <a href='https://nitrous.io/team'>Team</a>
            </li>
            <li>
              <a href='https://nitrous.io/jobs'>Jobs</a>
            </li>
            <li>
              <a href='http://updates.nitrous.io' target='_blank'>Updates</a>
            </li>
            <li>
              <a href='http://blog.nitrous.io' target='_blank'>Blog</a>
            </li>
          </ul>
        </div>
        <div class='span3'>
          <ul class='nav nav-list'>
            <li class='nav-header'>Elsewhere</li>
            <li>
              <a href='https://twitter.com/intent/user?screen_name=NitrousIO' target='_blank'>Twitter</a>
            </li>
            <li>
              <a href='http://github.com/action-io' target='_blank'>GitHub</a>
            </li>
            <li>
              <a href='http://angel.co/nitrous-io' target='_blank'>AngelList</a>
            </li>
            <li>
              <a href='http://www.crunchbase.com/company/nitrous-io' target='_blank'>CrunchBase</a>
            </li>
          </ul>
        </div>
        <div class='span3'>
          <ul class='nav nav-list'>
            <li class='copy'>
              &copy; 2012-2013
              <br>
              Irrational Industries Inc.
              <br>
              All rights reserved.
            </li>
            <li>
              <a href='https://mixpanel.com/f/partner' target='_blank'>
                <img alt='Mobile Analytics' src='https://cdn.mxpnl.com/site_media/images/partner/badge_light.png'>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>
<script async="async" src="https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js" type="text/javascript"></script>
</div>
      </body>
      </html>